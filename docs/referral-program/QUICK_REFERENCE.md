# Quick Reference: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

**–®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞**

---

## üéØ –ì–ª–∞–≤–Ω–æ–µ –∑–∞ 1 –º–∏–Ω—É—Ç—É

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: 6.5/10

**–†–∞–±–æ—Ç–∞–µ—Ç:**
‚úÖ –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã (300‚≠ê + 350‚≠ê)
‚úÖ Revenue share (1% –æ—Ç –ø–æ–∫—É–ø–æ–∫)
‚úÖ Milestones (1, 5, 15, 30 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤)
‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
‚ùå **–ö–†–ò–¢–ò–ß–ù–û:** –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–¥–∞ (–∫–æ–Ω–≤–µ—Ä—Å–∏—è 5% –≤–º–µ—Å—Ç–æ 90%)
‚ùå **–ö–†–ò–¢–ò–ß–ù–û:** Fraud prevention (—Ç–µ—Ä—è–µ–º $2-5K/–º–µ—Å—è—Ü)
‚ùå Gamification (–Ω–µ—Ç leaderboard)
‚ùå Smart timing (–Ω–µ—Ç event-driven –ø—Ä–æ–º—Ç–æ–≤)

### Quick Win (30 –º–∏–Ω—É—Ç):
**–ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è ‚Üí Conversion +1700%**

---

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

| –î–æ–∫—É–º–µ–Ω—Ç | –î–ª—è –∫–æ–≥–æ | –ß–∏—Ç–∞—Ç—å –µ—Å–ª–∏... |
|----------|----------|----------------|
| [EXECUTIVE_SUMMARY](./EXECUTIVE_SUMMARY.md) | CEO, Product Lead | –ù—É–∂–µ–Ω overview + ROI |
| [README](./README.md) | –í—Å–µ | –ü–µ—Ä–≤—ã–π —Ä–∞–∑ —Å–º–æ—Ç—Ä–∏—à—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é |
| [USER_EXPERIENCE_GUIDE](./USER_EXPERIENCE_GUIDE.md) | Product, Marketing | –•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å user journey |
| [AUTO_ACTIVATION_GUIDE](./AUTO_ACTIVATION_GUIDE.md) üî¥ | Frontend Dev | MUST READ - Quick Win! |
| [REFERRAL_ANALYSIS](./REFERRAL_ANALYSIS.md) | Engineering | –ù—É–∂–Ω—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ |
| [BEST_PRACTICES](./BEST_PRACTICES.md) | Product, UX | –ò–∑—É—á–∞–µ—à—å –∏–Ω–¥—É—Å—Ç—Ä–∏—é |
| [IMPLEMENTATION_ROADMAP](./IMPLEMENTATION_ROADMAP.md) | Eng Lead, PM | –ü–ª–∞–Ω–∏—Ä—É–µ—à—å —Å–ø—Ä–∏–Ω—Ç—ã |
| [FRAUD_PREVENTION](./FRAUD_PREVENTION.md) | Security, Backend | –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä—É–µ—à—å –∑–∞—â–∏—Ç—É |

---

## ‚ö° Quick Start –ø–æ —Ä–æ–ª—è–º

### Frontend Developer
```bash
1. –ü—Ä–æ—á–∏—Ç–∞–π: AUTO_ACTIVATION_GUIDE.md
2. –°–æ–∑–¥–∞–π 3 —Ñ–∞–π–ª–∞ (30 –º–∏–Ω—É—Ç):
   - webapp/src/utils/telegram.ts
   - webapp/src/hooks/useAutoReferral.ts
   - –î–æ–±–∞–≤—å hook –≤ App.tsx
3. Deploy ‚Üí –ö–æ–Ω–≤–µ—Ä—Å–∏—è +1700%
```

### Backend Developer
```bash
1. –ü—Ä–æ—á–∏—Ç–∞–π: FRAUD_PREVENTION.md ‚Üí Implementation Guide
2. Sprint 1 tasks (Week 1-2):
   - Create FraudDetectionService.ts
   - Migration: IP tracking table
   - Delayed rewards system
3. Deploy ‚Üí Fraud -75%
```

### Product Manager
```bash
1. –ü—Ä–æ—á–∏—Ç–∞–π: EXECUTIVE_SUMMARY.md (10 –º–∏–Ω—É—Ç)
2. –ü—Ä–æ—á–∏—Ç–∞–π: USER_EXPERIENCE_GUIDE.md (–ø–æ–Ω—è—Ç—å UX)
3. Review: IMPLEMENTATION_ROADMAP.md (approve sprints)
4. Action: Approve –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—é ASAP
```

### Security Team
```bash
1. –ü—Ä–æ—á–∏—Ç–∞–π: FRAUD_PREVENTION.md ‚Üí Threat Model
2. Review: Detection techniques
3. Approve: Thresholds –∏ monitoring
4. Setup: Incident response –ø—Ä–æ—Ü–µ—Å—Å—ã
```

---

## üî• Top 3 Priorities

### 1Ô∏è‚É£ AUTO-ACTIVATION (–°–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°!)

**–ü–æ—á–µ–º—É:**
- Conversion 5% ‚Üí 90% (+1700%)
- 30 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã
- ROI: –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```typescript
// 1. webapp/src/utils/telegram.ts
export function getTelegramStartParam() {
  return window.Telegram?.WebApp?.initDataUnsafe?.start_param || null
}

export function parseReferralCode(param: string | null) {
  return param?.match(/^ref_(.+)$/)?.[1] || null
}

// 2. webapp/src/hooks/useAutoReferral.ts
export function useAutoReferral() {
  useEffect(() => {
    const param = getTelegramStartParam()
    const code = parseReferralCode(param)
    if (code && !alreadyReferred) {
      activateCode(code)
    }
  }, [])
}

// 3. App.tsx
function App() {
  useAutoReferral() // ‚Üê –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
  return <YourApp />
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# Test –≤ dev:
window.Telegram = {
  WebApp: {
    initDataUnsafe: { start_param: 'ref_EP-TEST' }
  }
}

# –î–æ–ª–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ EP-TEST
```

---

### 2Ô∏è‚É£ FRAUD PREVENTION (Week 1-2)

**–ü–æ—á–µ–º—É:**
- –°–µ–π—á–∞—Å —Ç–µ—Ä—è–µ–º $2-5K/–º–µ—Å—è—Ü
- Fraud rate 30-40%
- –ù–µ—á–µ—Å—Ç–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ (–î–µ–Ω—å 1):**
```typescript
// –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–æ–¥–∞:
async function activateCode(userId, code, context) {
  // 1. IP check
  const referrerIP = await getUserIP(referrerId)
  if (referrerIP === context.ip) {
    throw new Error('SAME_IP_DETECTED')
  }

  // 2. Email check
  const normalized = normalizeEmail(user.email)
  const duplicate = await findByNormalizedEmail(normalized)
  if (duplicate) {
    throw new Error('EMAIL_DUPLICATE')
  }

  // 3. Velocity check
  const recentActivations = await countActivationsByIP(context.ip, '24h')
  if (recentActivations >= 3) {
    throw new Error('VELOCITY_EXCEEDED')
  }

  // Existing logic...
}
```

---

### 3Ô∏è‚É£ FIX MILESTONES (2 —á–∞—Å–∞)

**–ü–æ—á–µ–º—É:**
- Gap –º–µ–∂–¥—É 1 –∏ 5 —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
- Best practice: –ø–µ—Ä–≤—ã–π milestone ‚â§ 2 —Ä–µ—Ñ–µ—Ä–∞–ª–∞

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```json
// backend/content/referrals.json

// –ë–´–õ–û:
"milestones": [
  { "id": "first_crew", "threshold": 1, "rewards": { "stars": 500 } },
  { "id": "expedition", "threshold": 5, "rewards": { "stars": 1500 } },  ‚Üê Gap!
  ...
]

// –°–¢–ê–õ–û:
"milestones": [
  { "id": "first_crew", "threshold": 1, "rewards": { "stars": 300 } },
  { "id": "growing_squad", "threshold": 3, "rewards": { "stars": 800 } }, ‚Üê NEW
  { "id": "expedition", "threshold": 7, "rewards": { "stars": 2000 } },
  { "id": "galactic_club", "threshold": 15, "rewards": { "stars": 5000 } },
  { "id": "legend_circle", "threshold": 30, "rewards": { "stars": 12000 } },
  { "id": "cosmic_influencer", "threshold": 50, "rewards": { "stars": 25000 } } ‚Üê NEW
]
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ (—á—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å)

### –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è (–ø–æ—Å–ª–µ deploy)
```
‚úÖ start_param detected: >95%
‚úÖ Auto-activation success: >90%
‚ùå Errors: <5%

Alert if:
- Success rate <80%
- Error rate >10%
```

### Fraud Detection (–ø–æ—Å–ª–µ Sprint 1)
```
‚úÖ Fraud detected: Track daily
‚úÖ False positives: <5%
‚úÖ Legitimate approved: >95%

Alert if:
- Fraud rate >15%
- False positive >10%
```

### Overall Health
```
Viral Coefficient: >0.8 (target)
Conversion Rate: >85% (—Å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π)
Fraud Rate: <10%
Retention D7: >40%
```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Backend

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
psql -d energyplanet -c "
  SELECT
    COUNT(*) as total_activations,
    COUNT(*) FILTER (WHERE created_at > NOW() - INTERVAL '24h') as today,
    COUNT(DISTINCT referrer_id) as unique_referrers
  FROM referral_relations
  WHERE status = 'activated'
"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å fraud suspects
psql -d energyplanet -c "
  SELECT referrer_id, COUNT(*) as count
  FROM referral_relations
  WHERE created_at > NOW() - INTERVAL '7d'
  GROUP BY referrer_id
  HAVING COUNT(*) > 10
  ORDER BY count DESC
"

# Revenue share totals
psql -d energyplanet -c "
  SELECT
    SUM(share_amount) as total_granted,
    COUNT(DISTINCT referrer_id) as active_referrers
  FROM referral_revenue_events
  WHERE granted_at > NOW() - INTERVAL '30d'
"
```

### Frontend

```javascript
// Debug Telegram WebApp
console.log('Telegram WebApp:', window.Telegram?.WebApp)
console.log('Start param:', window.Telegram?.WebApp?.initDataUnsafe?.start_param)

// Test auto-activation locally
window.Telegram = {
  WebApp: {
    initDataUnsafe: {
      start_param: 'ref_EP-TEST'
    }
  }
}

// Force reload
location.reload()
```

---

## üö® Troubleshooting

### –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** `start_param` is `undefined`

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏: `?startapp=ref_CODE` (–Ω–µ `?start=`)
2. Telegram WebApp –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
3. –ü–∞—Ä–∞–º–µ—Ç—Ä –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É (–Ω–µ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏)

**Debug:**
```javascript
console.log('WebApp available:', !!window.Telegram?.WebApp)
console.log('Start param:', window.Telegram?.WebApp?.initDataUnsafe?.start_param)
```

---

### –ö–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** Hook —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º render

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const attempted = useRef(false)

useEffect(() => {
  if (attempted.current) return
  attempted.current = true
  // ... activation logic
}, []) // Empty deps!
```

---

### False positives –≤ fraud detection

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–µ–≥–∏—Ç–∏–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å thresholds (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ)
2. –î–æ–±–∞–≤—å manual review queue
3. –†–∞–∑—Ä–µ—à–∏ appeals
4. –õ–æ–≥–∏—Ä—É–π –≤—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üí° –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ö–æ–≥–¥–∞ –¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—é?
**A:** –ù–ï–ú–ï–î–õ–ï–ù–ù–û. –≠—Ç–æ 30 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã —Å ROI 18√ó.

### Q: –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç fraud prevention?
**A:** ~$8K —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, —ç–∫–æ–Ω–æ–º–∏—è $2-5K/–º–µ—Å—è—Ü. Payback <2 –º–µ—Å—è—Ü–∞.

### Q: –ù—É–∂–Ω–æ –ª–∏ –¥–µ–ª–∞—Ç—å –≤—Å–µ —É–ª—É—á—à–µ–Ω–∏—è?
**A:** –ù–µ—Ç. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:
1. Auto-activation (–∫—Ä–∏—Ç–∏—á–Ω–æ)
2. Fraud prevention (–∫—Ä–∏—Ç–∏—á–Ω–æ)
3. –û—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Q: –ö–∞–∫–æ–π timeline —Ä–µ–∞–ª–∏—Å—Ç–∏—á–µ–Ω?
**A:**
- Auto-activation: 1 –¥–µ–Ω—å
- Fraud prevention: 2 –Ω–µ–¥–µ–ª–∏
- Full roadmap: 12 –Ω–µ–¥–µ–ª—å

### Q: –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å success?
**A:** –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- Conversion rate >85%
- Fraud rate <10%
- Viral coefficient >0.8
- Retention D7 >40%

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–í–æ–ø—Ä–æ—Å—ã –ø–æ:**
- –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ ‚Üí Frontend Lead
- Fraud prevention ‚Üí Security Team
- Roadmap ‚Üí Engineering Lead
- –ë–∏–∑–Ω–µ—Å-–∫–µ–π—Å ‚Üí Product Lead

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- Issues: GitHub
- Updates: Engineering Slack
- Reviews: Weekly sync

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º

### Product Manager
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª EXECUTIVE_SUMMARY
- [ ] –ü–æ–Ω—è–ª ROI –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] Approved roadmap
- [ ] Aligned —Å Engineering Lead

### Engineering Lead
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª IMPLEMENTATION_ROADMAP
- [ ] Allocated resources
- [ ] Setup project tracking
- [ ] Scheduled kickoff

### Frontend Developer
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª AUTO_ACTIVATION_GUIDE
- [ ] –ü–æ–Ω—è–ª Telegram WebApp API
- [ ] –ì–æ—Ç–æ–≤ –∫ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] Setup test environment

### Backend Developer
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª FRAUD_PREVENTION
- [ ] –ü–æ–Ω—è–ª threat model
- [ ] –ì–æ—Ç–æ–≤ –∫ Sprint 1
- [ ] DB migrations reviewed

### Security Team
- [ ] Reviewed threat model
- [ ] Approved detection methods
- [ ] Setup monitoring
- [ ] Defined incident response

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-16
**–í–µ—Ä—Å–∏—è:** 1.0
