# Backend Status ‚Äì October 19, 2025

## ‚úÖ –ì–æ—Ç–æ–≤–æ
- **–°–µ—Å—Å–∏–∏**: `/api/v1/session` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å, –±—É—Å—Ç—ã, –∫–æ—Å–º–µ—Ç–∏–∫—É, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ —Ñ–∏—á-—Ñ–ª–∞–≥–∏; –æ—Ñ—Ñ–ª–∞–π–Ω-–¥–æ—Ö–æ–¥ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- **–ö–æ—Å–º–µ—Ç–∏–∫–∞**: `/api/v1/cosmetics`, `/cosmetics/purchase`, `/cosmetics/equip` (mock Stars) + –∞–≤—Ç–æ–¥–æ–≤—ã–¥–∞—á–∞ free/level –ø—Ä–µ–¥–º–µ—Ç–æ–≤.
- **–ë—É—Å—Ç—ã**: `/api/v1/boost/claim` (ad/daily/premium), –∫—É–ª–¥–∞—É–Ω—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (`events`).
- **Mock Stars**: `/api/v1/purchase/invoice` ‚Üí `/api/v1/purchase`, –∑–∞–≥–ª—É—à–∫–∞ `/purchase/webhook`; idempotent –∑–∞–ø–∏—Å—å –≤ `purchases`.
- **–¢–µ—Å—Ç—ã**: `backend/src/__tests__/monetization.e2e.test.ts` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã.

## üîÑ –í —Ä–∞–±–æ—Ç–µ / –í –ø–ª–∞–Ω–∞—Ö
- **Telegram Stars (–±–æ–µ–≤–æ–µ)**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook, —Ö—Ä–∞–Ω–µ–Ω–∏–µ `telegram_payment_id`, –Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏.
- **Rewarded Ads**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Yandex.Direct + –±—É—Å—Ç –æ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã.
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: –≤–∏—Ç—Ä–∏–Ω–∞ Star-–ø–∞–∫–æ–≤, –±—É—Å—Ç—ã, –∫–æ—Å–º–µ—Ç–∏–∫–∞, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `pay_url` –∏–∑ –∏–Ω–≤–æ–π—Å–∞.
- **DevOps**: Dockerfile, CI/CD, staging.

## üìé –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
1. **Cosmetics**
   ```bash
   curl -H "Authorization: Bearer <token>" https://type-arc-derby-analyzed.trycloudflare.com/api/v1/cosmetics
   ```
   –ó–∞—Ç–µ–º –ø–æ–∫—É–ø–∫–∞/—ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ —Å —Ç–µ–º –∂–µ —Ç–æ–∫–µ–Ω–æ–º.
2. **Stars mock**
   ```bash
   # –ò–Ω–≤–æ–π—Å
   curl -X POST .../purchase/invoice -d '{"purchase_id":"mock-1","item_id":"stars_pack_small","price_stars":100}'
   # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
   curl -X POST .../purchase -d '{"purchase_id":"mock-1","item_id":"stars_pack_small","price_stars":100}'
   ```
3. **Boost**
   ```bash
   curl -X POST .../boost/claim -d '{"boost_type":"daily_boost"}'
   ```

## üìÖ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Telegram Stars webhook: –≤–∞–ª–∏–¥–∞—Ü–∏—è `X-Telegram-Bot-Api-Secret-Token`, —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ payload, –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥.
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—ã–¥–∞—á—É –Ω–∞–≥—Ä–∞–¥ (—ç–Ω–µ—Ä–≥–∏—è, –±—É—Å—Ç—ã, –∫–æ—Å–º–µ—Ç–∏–∫–∞) –Ω–∞ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `purchases`.
3. –í UI –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å `pay_url`, –∞–∫—Ç–∏–≤–Ω—ã–µ –±—É—Å—Ç—ã –∏ –Ω–æ–≤—ã–µ –∫–æ—Å–º–µ—Ç–∏–∫–∏.
4. –°–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å rewarded-ads —Ñ–ª–æ—É –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–æ–∫–µ–Ω–æ–≤.

_–ê–≤—Ç–æ—Ä: –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ CLI, –¥–∞—Ç–∞ 19.10.2025_
