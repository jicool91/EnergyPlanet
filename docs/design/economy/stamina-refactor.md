# Energy-to-Stamina Refactor Draft

## Goals
- Развести «выносливость для кликов» и экономические ресурсы.
- Сохранить ощущение прогресса за счёт Tap Level и мета-экономики.
- Подготовить систему для будущих анти-бот и live-ops механизмов.

## Новая терминология
- **Ста́мина (Stamina / Пульсарный заряд)**  
  - Расходуется на каждое нажатие.  
  - Восстанавливается со временем (базово 1 ед. / 12 сек → полный стак за ~1 час).  
  - Ёмкость и скорость регена растут с Tap Level и мета-перками.  
  - Обнуляется при фоновом автокликере → игроку понятно, что лучше вернуться позже.

- **Уран (Upgrade Resource)**  
  - Основное сырьё для апгрейдов планет и инфраструктуры.  
  - Добывается из тапов (через конвертацию ста́мины), квестов, сезонных наград.  
  - Может иметь «обработку»: переработка в сплавы/модули на поздних уровнях.

- **Антиматерия (Premium)**  
  - Мягкая премиум-валюта для ускорения восстановления, покупки бустеров, пропуска квестов.  
  - Источники: магазин, сезонный пропуск, редкие события.

## Цикл "Жизнь игрока"
1. **Заходит → забирает ста́мину**, проверяет запас Урана, траты/апгрейды.  
2. **Активно кликает**, тратит ста́мину; одновременно растёт Tap Level и множители.  
3. **Ста́мина кончилась → пауза**. Игрок может заняться:
   - Квестами (не тратят ста́мину, но дают Уран/Антиматерию).  
   - Мета-менеджментом (апгрейды, редкие события).  
   - Социальными активностями.
4. **Через 8–12 часов** возвращается: ста́мина полная, сезонные задания обновлены.  
5. **Повышает Tap Level / ёмкость ста́мины** → в каждой сессии больше выгоды, удержание растёт.

## Баланс (первичная гипотеза)
- Базовая ёмкость ста́мины: 300 ед. (≈ 5 мин активных тапов).  
- Пополнение: +1 ед. / 12 сек (полный стак за 60 мин).  
- Tap Level +1: +10% к ёмкости, +5% к регену.  
- Ограничение rate limiter'ов на сервере:  
  - `/tap`: поднять до ~25 req/sec (вместо 10).  
  - `/tick`: 1 req / 3 sec (вместо 1 / 8 sec).  
  - Антибот → анализ паттернов (CPS, равные интервалы, длительность сессии).

## Следующие шаги
1. Прототип сделать на фронте: новая сущность `stamina`, виджет в HUD, расход/regen.  
2. Бэкенд: хранение ста́мины, расчёт регена, API для обновления.  
3. Миграция экономических названий (Энергия → Уран, добавить Антиматерию).  
4. UI/UX: туториал, пояснения про паузы, предложения по Антиматерии.  
5. Анти-бот аналитика: собирать паттерны на `/tap` и `/tick`.  
6. Обновить конфиги лимитеров после включения ста́мины.

