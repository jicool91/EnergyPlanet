# Seasonal Rewards Specification

## Цель
Ежемесячные сезоны лидерборда с ручной выдачей призов (купон Wildberries и т.п.) администратором.

## Роли
- **Игрок** — участвует в сезонном рейтинге, видит награды и историю сезонов.
- **Админ** — закрывает сезон, просматривает итоговый топ, выдаёт индивидуальные награды топ‑3.

## Поток сезона
1. **Старт**: сезон длится 30/31 день, данные пишутся в `season_snapshots`.
2. **Финиш**: cron+админ панель фиксируют топ N и переводят сезон в `closed`.
3. **Награды**:
   - Админ открывает экран Season Awards.
   - Видит таблицу (место, user, энергия, купон/статус).
   - Кнопки `Reward Gold`, `Reward Silver`, `Reward Bronze` (настраиваемые).
   - Каждой кнопке соответствует действие: запись в events + выдача внутриигрового предмета/купонного кода.
4. **История**: игрок видит «Прошлый сезон» (топ-3 + призы) и «Текущий сезон» прогресс.

## UI Требования
- Экран Season Awards: таблица + action buttons, поддержка dark/light.
- Notifications: при выдаче награды — toast + запись в журнал админа.
- Seasonal recap для игроков: модалка при входе в новый сезон.

### Реализация UI (2025-11-06)
- `SeasonRewardsAdminPanel` (webapp) покрывает таблицу топ-3, выдачу купонов и напоминания.
- Storybook сценарии (`Seasonal/SeasonRewardsAdminPanel`) и визуальные уведомления через `NotificationContainer`.
- PvP/Event витрина обновлена: см. `MatchLobby`, `EventSchedule`, экран `PvPEventsScreen`.

## Технические заметки
- Сохранять снапшот топ-100 в `season_snapshot`.
- `GET /admin/seasons/snapshot` возвращает последний закрытый сезон с топ-3 и метаданными.
- Админское действие `POST /admin/seasons/:id/reward` (параметры пользователь и тип награды).
- Логи в таблицу `events` (`season_reward_granted`).
- Storybook stories: admin view (empty / top3 / уже выдано).
- Playwright QA: проверка выдачи награды (mock backend).

## TODO
- [ ] Спецификацию наград согласовать с маркетингом.
- [ ] Подготовить купонные коды и интеграцию.
- [ ] Добавить сезонные тексты в i18n.
