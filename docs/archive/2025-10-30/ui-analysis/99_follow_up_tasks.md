# To-Do — Глубокий Анализ Выявленных Проблем

> Цель: уточнить причины и масштаб обнаруженных UX/API проблем до постановки задач на разработку.

## Выполнено 26.10.2025
- Подключён `DailyRewardBanner` к данным BoostHub, таймер синхронизирован с сервером, добавлены тосты и телеметрия.
- `MainScreen`, `BuildingsPanel`, `ShopPanel`, `LevelUpScreen`, `SettingsScreen` и `Toggle` доведены до требований доступности (safe-area, `role="main"`, радиогруппы, focus-trap).
- Обновлены ошибки Tap и BoostHub: уведомления для пользователей и логирование `tap_error`/`boost_claim_ui_error`.

## 1. Пользовательские сценарии и тест-кейсы
- Запланировать ручные прогоны на реальных устройствах (iOS/Android, разные размеры мини-окна Telegram) для:
  - Проверки safe-area и перекрытия элементов (`MainScreen`, `Floating Back to Tap`, TabBar).
  - Оценки работы `ScrollContainer` вместе с `Virtuoso`.
- Провести интервью с 3–5 игроками, чтобы понять ожидания от баннера ежедневной награды и социального блока.

## 2. Техническая диагностика
- Профилировать нагрузку на `scroll`-обработчик (`MainScreen.tsx:150`) при больших списках (Chrome DevTools Performance, React Profiler).
- Проверить логи `/boost/claim` и `/purchase/*` на предмет частоты ответов 400/500. Сопоставить с UI-ошибками.
- Измерить дрейф таймеров (`DailyRewardBanner`, `BoostHub`) сравнив клиентскую метрику с серверным временем.
- Собрать регрессионные скринкасты LevelUpScreen/BoostHub/Tap после правок и проверить отсутствие деградаций на low-end Android.

## 3. Данные и телеметрия
- Добавить временный логирование в `logClientEvent` для:
  - `tab_change`, `shop_section_change`, `boost_claim` (успех/ошибка).
  - Ошибок на Tap-кнопке (429, 400) с payload.
- Проанализировать retention-фаннел: сколько пользователей видят `PrestigeCard`, но не нажимают CTA.
- Настроить дашборд по новым событиям `tap_error`, `boost_claim_ui_success/error`, сверить объёмы с бэкенд-логами.

## 4. Доступность и локализация
- Провести аудит с VoiceOver/ TalkBack:
  - Проверить отсутствие `role="main"` и `role="switch"` (Toggle).
  - Убедиться, что прогресс-бары объявляют значения.
- Собрать список смешанных строк (RU/EN) и согласовать с локализацией.
- Проверить озвучивание нового LevelUpScreen (role="dialog") и SocialProofCard в Screen Reader; задокументировать баги, если появятся.

## 5. Визуальная консистентность
- Сверить Tailwind-классы с бренд-гайдом: оттенки `cyan/lime` vs Telegram accent.
- Проверить контраст фокуса и кнопок в светлой/тёмной теме с инструментом (например, Stark, Axe).
- Провести smoke-тест на светлой/тёмной теме для обновлённых кнопок/радиогрупп; приложить отчёт по контрасту.

## 6. Документация и дизайн-системы
- Зафиксировать UI-иерархию в `docs/` (Miro/Figma) на основе отчётов.
- Подготовить сравнение с Telegram Mini App best practices для презентации команде продукта.
- Обновить гайд по телеметрии (добавить описание новых событий, payload и SLA по реакциям на ошибки).

_Результат:_ отчёт с измерениями, логами и пользовательскими инсайтами, который позволит определить приоритеты до внедрения изменений.
