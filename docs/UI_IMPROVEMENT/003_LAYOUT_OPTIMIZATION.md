# –§–∞–∑–∞ 3: Layout Optimization & Navigation Refactor

**–≠—Å—Ç–∏–º–µ–π—Ç:** 3-4 –¥–Ω—è | **–ú–∏–∫—Ä–æ—Ç–∞—Å–∫–∏:** 13

**–¢—Ä–µ–±—É–µ—Ç:** –§–∞–∑–∞ 1, 2 ‚úÖ

---

## üìã –ú–∏–∫—Ä–æ—Ç–∞—Å–∫–∏

### 3.1 –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (Tap-First Layout)
**–¶–µ–ª—å:** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫—É —Ç–∞–ø–∞ –≤ —Ü–µ–Ω—Ç—Ä, –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∏–∂–µ
- [ ] –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å layout: Tap –≤ —Ü–µ–Ω—Ç—Ä–µ –≤—å—é–ø–æ—Ä—Ç–∞
- [ ] Stats cards –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑ (–∑–∞ —Å–∫—Ä–æ–ª–ª)
- [ ] –£–±—Ä–∞—Ç—å stats –∏–∑ top sticky
- [ ] Level bar –æ—Å—Ç–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö—É (compact)
- [ ] Next goal card –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–æ –≤–Ω–∏–∑—É
- [ ] MainScreen.tsx refactor –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 3.2 –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Header –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
**–¶–µ–ª—å:** Compact header —Å essential –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- [ ] Header: Level + Energy + Stars (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –£–±—Ä–∞—Ç—å XP progress –∏–∑ header (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑)
- [ ] Header fixed –≤–≤–µ—Ä—Ö—É, –Ω–µ scrollable
- [ ] –í—ã—Å–æ—Ç–∞ –º–∞–∫—Å–∏–º—É–º 60px
- [ ] –ò–∫–æ–Ω–∫–∞ settings/profile –≤ header

### 3.3 Refactor –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é (Bottom Navigation)
**–¶–µ–ª—å:** –£–ª—É—á—à–∏—Ç—å UX –¥–ª—è 7 –≤–∫–ª–∞–¥–æ–∫
- [ ] Option 1: –°–º–µ—à–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö + "More" –º–µ–Ω—é
- [ ] Option 2: –°–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º—ã–π navigation —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º–∏ —Å–≤–µ—Ä—Ö—É
- [ ] Option 3: Hamburger –º–µ–Ω—é + 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∏
- [ ] **–í—ã–±–æ—Ä:** Option 2 (—Å–∫—Ä–æ–ª–ª —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏)
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å footer: home, shop, builds, boosts –Ω–∞ —Å–∫—Ä–æ–ª–ª –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å notch

### 3.4 –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π Tab Bar –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
**–¶–µ–ª—å:** –î–ª—è –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `webapp/src/components/TabBar.tsx`
- [ ] Props: `tabs` (array), `active`, `onChange`
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ scroll –¥–ª—è –∏–∑–±—ã—Ç–∫–∞ —Ç–∞–±–æ–≤
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- [ ] Highlight active tab

### 3.5 Refactor MainScreen —Å—Ç—Ä—É–∫—Ç—É—Ä—É
**–¶–µ–ª—å:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `MainScreenHeader.tsx` (level, energy, settings)
- [ ] –°–æ–∑–¥–∞—Ç—å `TapSection.tsx` (–±–æ–ª—å—à–æ–π —Ç–∞–ø –≤ —Ü–µ–Ω—Ç—Ä–µ)
- [ ] –û—Å—Ç–∞–≤–∏—Ç—å `MainScreen.tsx` –∫–∞–∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è tab switching
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å footer –Ω–∞ —É—Ä–æ–≤–µ–Ω—å App.tsx (–≥–ª–æ–±–∞–ª—å–Ω–∞—è)

### 3.6 –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å Footer –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
**–¶–µ–ª—å:** –ù–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–∞–±
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å footer –∏–∑ MainScreen –≤ App.tsx
- [ ] –°–¥–µ–ª–∞—Ç—å footer independant –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–±–∞
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useGameStore –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–±–∏–ª—å–Ω—ã–π safe-area —Ä–∞–±–æ—Ç–∞–µ—Ç

### 3.7 –î–æ–±–∞–≤–∏—Ç—å Lazy Loading –¥–ª—è –≤—Å–µ—Ö –ø–∞–Ω–µ–ª–µ–π
**–¶–µ–ª—å:** –ù–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ –ø–æ–∫–∞ –æ–Ω–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã
- [ ] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö panel –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (ShopPanel, LeaderboardPanel –∏ —Ç.–¥.)
- [ ] React.lazy + Suspense –æ–±–µ—Ä—Ç–∫–∞
- [ ] Fallback component —Å skeleton loader
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã

### 3.8 –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Stats cards –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
**–¶–µ–ª—å:** –°–∫—Ä—ã—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ stats –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] Top stats (Energy, Level, Tap lvl, Passive income) - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã
- [ ] Streak stats - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ streakCount > 0
- [ ] –û—Å—Ç–∞–ª—å–Ω—ã–µ stats - –≤ drawer/expandable –º–µ–Ω—é
- [ ] –£–±—Ä–∞—Ç—å 4-column grid, —Å–¥–µ–ª–∞—Ç—å 2-column

### 3.9 –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π Level Bar
**–¶–µ–ª—å:** –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ header
- [ ] –¢–æ–Ω–∫–∏–π progress bar –≤–≤–µ—Ä—Ö—É (2px –≤—ã—Å–æ—Ç–∞)
- [ ] –ò–ª–∏ –≤ header –∫–∞–∫ —á–∞—Å—Ç—å –¥–∏–∑–∞–π–Ω–∞
- [ ] Hover –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "N/X XP"
- [ ] –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏

### 3.10 Refactor XP Progress –∫–∞—Ä—Ç–æ—á–∫–∞
**–¶–µ–ª—å:** –°–∫—Ä—ã—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞–ø—Ä–æ—Å
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –±–æ–ª—å—à—É—é XP card –≤–Ω–∏–∑
- [ ] –°–¥–µ–ª–∞—Ç—å –µ–µ compact –≤–µ—Ä—Å–∏—é –≤ header –∏–ª–∏ —Å–∫—Ä—ã—Ç—å
- [ ] –ü–æ–∫–∞–∑–∞—Ç—å –≤ drawer/expandable section
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

### 3.11 –î–æ–±–∞–≤–∏—Ç—å Quick Actions –≤ header
**–¶–µ–ª—å:** –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º
- [ ] Settings/Profile –∏–∫–æ–Ω–∫–∞ (‚öôÔ∏è / üë§)
- [ ] Top-up Stars –∏–∫–æ–Ω–∫–∞ (–º–æ–∂–Ω–æ –≤ Shop –≤–∫–ª–∞–¥–∫–µ)
- [ ] Notifications –∏–∫–æ–Ω–∫–∞ (–¥–ª—è future)
- [ ] –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ top-right corner

### 3.12 –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª
**–¶–µ–ª—å:** –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –∫–Ω–æ–ø–∫–∏ —Ç–∞–ø–∞
- [ ] –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö: Tap –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ viewport –±–µ–∑ —Å–∫—Ä–æ–ª–ª–∞
- [ ] –£–±—Ä–∞—Ç—å padding –≤–≤–µ—Ä—Ö—É
- [ ] Compact header (max 56px)
- [ ] Stats –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑ –∏–ª–∏ —Å–∫—Ä—ã—Ç—å

### 3.13 –î–æ–±–∞–≤–∏—Ç—å Scroll-to-top functionality
**–¶–µ–ª—å:** –ë—ã—Å—Ç—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫ —Ç–∞–ø—É —Å –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–æ–∫
- [ ] –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ "Back to Tap" –∏–ª–∏ double-tap –Ω–∞ –≤–∫–ª–∞–¥–∫—É
- [ ] –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –≤ top
- [ ] –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è UX

---

## üéØ Success Criteria

–ü–æ—Å–ª–µ —ç—Ç–æ–π —Ñ–∞–∑—ã:
- [ ] Tap visible –±–µ–∑ —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (375px)
- [ ] Bottom navigation —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- [ ] Lazy loading —Ä–∞–±–æ—Ç–∞–µ—Ç (scroll in DevTools)
- [ ] –ù–µ—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ footer –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∞–±–∞
- [ ] –ù–µ—Ç –ª–∏—à–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤—ã—à–µ fold
- [ ] Header compact –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π
- [ ] –í—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏ smooth
- [ ] Code review approved

---

**–†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç:** –§–∞–∑–∞ 4, 5
**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:** –§–∞–∑—ã 1, 2 ‚úÖ
