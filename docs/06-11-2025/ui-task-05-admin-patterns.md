# Task 05 — Консолидация административных потоков (2025-11-06)

## Цель
Сформировать единый пользовательский путь для административных функций, исключив появление служебных элементов на основных вкладках и синхронизировав документацию.

## Исходное состояние
- Админские действия разбросаны по нескольким экранам (`TapScreen`, `ExchangeScreen`, `EarnScreen`), что нарушает рекомендацию Telegram удерживать в нижней навигации только ключевые пользовательские сценарии.
- В `docs/qa/stage-f-checklist.md` и `docs/release-notes/stage-f.md` нет пункта о проверке отсутствия админ-МСU на пользовательских вкладках.
- Нет отдельной документации по роли администратора в Stage F.

## Рекомендации
1. **Единый вход**  
   - Добавить `AdminActionsSheet`/`AdminDashboard` и запускать его из профиля или отдельной вкладки «More» (без размещения в bottom navigation).  
   - Проверять роль до рендера листа (флаг `gameStore.isAdmin`).

2. **Документация**  
   - В `docs/qa/stage-f-checklist.md` добавить пункт «Админские элементы отсутствуют на пользовательских вкладках; проверка через профиль».  
   - В `docs/release-notes/stage-f.md` описать новый путь и ссылку на лист/экран.

3. **Тестирование**  
   - Добавить Playwright сценарий, который эмулирует пользователя без роли администратора и проверяет отсутствие админ-кнопок на Tap/Exchange/Friends/Earn.  
   - Добавить сценарий, в котором админ переходит в профиль и открывает `AdminActionsSheet`.

4. **Безопасность**  
   - Поскольку Telegram Mini Apps UI может быть открыт в web-view, скрывать админ-функции только по фронтенду недостаточно. Требуется проверка роли на бэкенде (на уровне `AdminController`).  
   - При открытии админ-листа использовать `MainButton` для подтверждения критичных действий и `SecondaryButton` для отмены.

## Следующие шаги
1. Реализовать админ-лист/экран и вычистить служебные CTA с пользовательских вкладок.  
2. Обновить документацию и чеклисты.  
3. Обновить Playwright/Chromatic тесты и зафиксировать новые baseline.
