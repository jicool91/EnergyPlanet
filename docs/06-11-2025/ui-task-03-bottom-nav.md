# Task 03 — Нижняя навигация и вкладка «Чат» (2025-11-06)

## Цель
Сделать нижнюю навигацию мобильной мини-аппы соответствующей рекомендациям Telegram: оставить только ключевые пользовательские сценарии, убрать «Airdrop» и подготовить вкладку для будущего чата/кланов.

## Исходное состояние
- `BottomNavigation` (`webapp/src/components/layout/BottomNavigation.tsx`) рендерит 5 вкладок, но одна из них — «Airdrop», которая не является постоянной потребительской функцией.
- Контейнер ограничен `max-w-xl`, поэтому на широких экранах навигация выглядит сжатой и «плавает».
- Нет учёта непрочитанных сообщений (бейджей) для будущего чата.

## Требования Telegram Mini Apps
- Bottom navigation предназначена только для основных пользовательских сценариев и должна повторять мобильные паттерны, без второстепенных вкладок.
- Количество пунктов ограничено пятью, а порядок следует строить от основных сценариев к дополнительным.
- Навигация обязана корректно работать в стандартном и `expanded` режиме с учётом safe area.

## Рекомендации
1. **Заменить «Airdrop» на «Chat»**  
   - Обновить `navigationStore`/`App.tsx`, добавив маршрут `chat`.  
   - Ввести feature flag `features.chatEnabled`, чтобы при необходимости скрывать вкладку до релиза.

2. **Бейджи непрочитанного**  
   - Использовать существующий `badge` проп в `BottomNavigationTab`, подключив стор чата (`chatStore.unreadCount`).  
   - Для кланового чата предусмотреть разделение `Global`/`Clan`.

3. **Адаптивная ширина**  
   - Удалить `max-w-xl`, заменить на `max-w-3xl` или `max-w-none` с внутренними отступами, чтобы навигация выглядела ровно на Fold/Tablet.

4. **Safe area и доступность**  
   - Проверить, что `paddingBottom` учитывает safe area из `useSafeArea`.  
   - Обновить Chromatic сторисы и Playwright тест `stage-f.spec.ts` для новой вкладки.

## Следующие шаги
1. Реализовать `ChatScreen.tsx` (пока с плейсхолдером) и добавить в навигацию.  
2. Перенастроить `BottomNavigation` на full-width контейнер.  
3. Настроить бейджи и обновить документацию (`docs/roadmap/migration-plan.md`, `docs/release-notes/stage-f.md`).
