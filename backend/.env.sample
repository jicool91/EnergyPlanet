# Environment Configuration Sample
# Copy this file to .env and fill in your values

# ============================================================================
# SERVER CONFIG
# ============================================================================
APP_ENV=development
NODE_ENV=development
PORT=3000
HOST=::
API_PREFIX=/api/v1

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=energy_planet
DB_USER=energyplanet_app
DB_PASSWORD=your_secure_password_here
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_SSL=false

# ============================================================================
# REDIS (Caching & Queue)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false

# ============================================================================
# CACHE
# ============================================================================
CACHE_ENABLED=true
CACHE_TTL_LEADERBOARD=30
CACHE_TTL_PROFILE=15

# ============================================================================
# TELEGRAM BOT
# ============================================================================
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz123456789
TELEGRAM_BOT_USERNAME=energy_planet_bot
TELEGRAM_MINI_APP_URL=https://t.me/energy_planet_bot/app
TELEGRAM_AUTHDATA_MAX_AGE_SEC=86400
# Дополнительные разрешённые Origin (через пробел или запятую), по умолчанию https://t.me
TELEGRAM_ALLOWED_ORIGINS=

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
JWT_SECRET=your_jwt_secret_key_change_this_in_production
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d

# ============================================================================
# TELEGRAM STARS (Monetization)
# ============================================================================
TELEGRAM_STARS_ENABLED=true
TELEGRAM_PAYMENT_WEBHOOK_SECRET=your_payment_webhook_secret

# ============================================================================
# REWARDED ADS (Yandex.Direct / Google AdMob)
# ============================================================================
AD_PROVIDER=yandex
YANDEX_AD_BLOCK_ID=your_yandex_block_id
YANDEX_AD_TOKEN_SECRET=your_yandex_token_secret
# OR for Google AdMob:
# AD_PROVIDER=admob
# ADMOB_APP_ID=ca-app-pub-1234567890123456~1234567890
# ADMOB_AD_UNIT_ID=ca-app-pub-1234567890123456/1234567890

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_FLAGS_SOURCE=file
FEATURE_FLAGS_FILE=../content/flags/default.json
# Alternative: FEATURE_FLAGS_SOURCE=redis

# ============================================================================
# CONTENT LOADER
# ============================================================================
CONTENT_PATH=../content
CONTENT_RELOAD_INTERVAL_MIN=60

# ============================================================================
# ANTI-CHEAT
# ============================================================================
ANTI_CHEAT_ENABLED=true
ANTI_CHEAT_AUTO_BAN=false
ANTI_CHEAT_ALERT_ADMINS=true

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_WINDOW_MS=60000
AUTH_RATE_LIMIT_MAX=8

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=warn
LOG_REQUEST_SAMPLE_RATE=0.005
LOG_CLIENT_ERROR_SAMPLE_RATE=0.1
LOG_TELEMETRY_SAMPLE_RATE=0.01
LOG_TICK_SAMPLE_RATE=0
LOG_SLOW_REQUEST_THRESHOLD_MS=500
LOG_SLOW_QUERY_THRESHOLD_MS=500

# ============================================================================
# MONITORING
# ============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# ============================================================================
# CDN & ASSETS
# ============================================================================
CDN_URL=https://cdn.energyplanet.game
STATIC_ASSETS_PATH=./public

# ============================================================================
# CORS
# ============================================================================
CORS_ORIGIN=https://energyplanet.game,https://t.me
CORS_CREDENTIALS=true

# ============================================================================
# SESSION
# ============================================================================
SESSION_TIMEOUT_MIN=30
MAX_OFFLINE_HOURS=12
OFFLINE_INCOME_MULTIPLIER=0.5
SESSION_REFRESH_AUDIT_TTL_DAYS=30

# ============================================================================
# WEBHOOKS
# ============================================================================
WEBHOOK_BASE_URL=https://api.energyplanet.game
WEBHOOK_SECRET=your_webhook_secret_here

# ============================================================================
# ADMIN
# ============================================================================
ADMIN_TELEGRAM_IDS=123456789,987654321
SUPER_ADMIN_TELEGRAM_ID=123456789

# ============================================================================
# TESTING (for dev/staging only)
# ============================================================================
TEST_MODE=false
BYPASS_TELEGRAM_AUTH=false
MOCK_PAYMENTS=false
